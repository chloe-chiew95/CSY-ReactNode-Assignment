(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{13:function(e,t,a){},25:function(e,t,a){e.exports=a(37)},30:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(21),i=a.n(l),s=(a(30),a(11)),c=a(3),o=a(4),u=a(6),m=a(5),h=(a(13),a(16)),d=a.n(h),p=a(22),b=a(7),v=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).dateCallback=function(e){n.props.dateCallback(e)},n.timeCallback=function(e){n.props.timeCallback(e)},n}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Delivery Date/Time"),r.a.createElement(f,{parentCallback:this.dateCallback,date:this.props.minDate,defDate:this.props.date}),r.a.createElement(E,{parentCallback:this.timeCallback,defTime:this.props.time}))}}]),a}(n.Component),f=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).OnChangeListener=function(e){n.props.parentCallback(e.target.value)},n.OnChangeListener=n.OnChangeListener.bind(Object(b.a)(n)),n}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("label",{for:"dateSel"},r.a.createElement("h3",null,"Select date: ")),r.a.createElement("input",{name:"inputDate",type:"date",min:this.props.date,defaultValue:this.props.defDate,onChange:this.OnChangeListener}))}}]),a}(n.Component),E=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).OnChangeListener=function(e){n.props.parentCallback(e.target.value)},n}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("label",{for:"timeSel"},r.a.createElement("h3",null,"Select time: ")),r.a.createElement("input",{type:"time",onChange:this.OnChangeListener,defaultValue:this.props.defTime}))}}]),a}(n.Component),k=v,C=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).restCallback=function(e){n.props.restCallback(e)},n.state={restArr:[]},n.FilterRestaurant=n.FilterRestaurant.bind(Object(b.a)(n)),n}return Object(o.a)(a,[{key:"FilterRestaurant",value:function(e,t,a){var n=["sun","mon","tue","wed","thu","fri","sat"][new Date(t).getDay()],r=e.split(":"),l=[];a.forEach((function(e,t){var a=e.operationHours.split(" - ");a.forEach((function(e,t){e.includes("am")?a[t]=parseInt(e.replace("am","")):a[t]=parseInt(e.replace("pm",""))+12})),!e.offDays.includes(n)&&a[0]<=r[0]&&a[1]>=r[0]&&-1==l.indexOf(e.name)&&l.push(e.name)})),this.setState({restArr:l})}},{key:"componentDidMount",value:function(){this.setState({restArr:[]}),this.FilterRestaurant(this.props.time,this.props.date,this.props.restArr)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Select Restaurant"),r.a.createElement(O,{restCallback:this.restCallback,restArr:this.state.restArr}))}}]),a}(n.Component),O=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onClickListener=n.onClickListener.bind(Object(b.a)(n)),n}return Object(o.a)(a,[{key:"onClickListener",value:function(e){this.props.restCallback(e.target.value)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Restaurant-Tb"},r.a.createElement("table",null,0==this.props.restArr.length?r.a.createElement("p",{className:"alert-msg"},"No restaurants are unavailable at this time!"):this.props.restArr.map((function(t){return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("input",{name:"restaurantName",type:"radio",onChange:e.onClickListener,value:t}),t))}))))}}]),a}(n.Component),j=C,y=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).menuCallback=function(e){n.props.menuCallback(e)},n.state={menuArr:[]},n.FilterMenu=n.FilterMenu.bind(Object(b.a)(n)),n}return Object(o.a)(a,[{key:"FilterMenu",value:function(e,t,a,n){var r=/(MYR)\w+/g,l=["One","Two","Three","Four","Five"],i=["sun","mon","tue","wed","thu","fri","sat"][new Date(t).getDay()],s=e.split(":"),c=[];a.forEach((function(e,t){var a=e.operationHours.split(" - ");if(a.forEach((function(e,t){e.includes("am")?a[t]=parseInt(e.replace("am","")):a[t]=parseInt(e.replace("pm",""))+12})),!e.offDays.includes(i)&&a[0]<=s[0]&&a[1]>=s[0]&&e.name==n)for(var o=0;o<5;o++){var u=[e["set"+l[o]].replace(/( - MYR)\w+/g,""),e["set"+l[o]].match(r)];u[1]=(u[1]+"").replace("MYR",""),c.push([u[0],u[1]])}})),this.setState({menuArr:c})}},{key:"componentDidMount",value:function(){this.props.menuCallback([[],0]),this.setState({menuArr:[]}),this.FilterMenu(this.props.time,this.props.date,this.props.restArr,this.props.name)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Select Menu Item"),r.a.createElement(I,{menuArr:this.state.menuArr,menuItem:this.props.menuItem,total:this.props.total,menuCallback:this.menuCallback}))}}]),a}(n.Component),I=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onChangeListener=n.onChangeListener.bind(Object(b.a)(n)),n.removeElement=n.removeElement.bind(Object(b.a)(n)),n}return Object(o.a)(a,[{key:"onChangeListener",value:function(e){var t=e.target.id+" - MYR"+e.target.value;if(1!=e.target.checked){var a=parseInt(this.props.total)-parseInt(e.target.value);this.props.menuCallback([this.removeElement(Object(s.a)(this.props.menuItem),t),a])}else{a=parseInt(this.props.total)+parseInt(e.target.value);this.props.menuCallback([[].concat(Object(s.a)(this.props.menuItem),[t]),a])}}},{key:"removeElement",value:function(e,t){var a=e.indexOf(t);return a>-1&&e.splice(a,1),e}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Restaurant-Tb"},r.a.createElement("table",null,r.a.createElement("th",null,"Set"),r.a.createElement("th",null,"Price"),this.props.menuArr.map((function(t){return r.a.createElement("tr",null,r.a.createElement("td",null,t[0]),r.a.createElement("td",null,"MYR",t[1]),r.a.createElement("td",null,-1==e.props.menuItem.indexOf(t[0]+" - MYR"+t[1])?r.a.createElement("input",{type:"checkbox",onChange:e.onChangeListener,value:t[1],id:t[0]}):r.a.createElement("input",{type:"checkbox",checked:!0,onChange:e.onChangeListener,value:t[1],id:t[0]})))})))," ")}}]),a}(n.Component),g=y,N=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(w,{order:this.props.order,time:this.props.time}))}}]),a}(n.Component),w=function(e){return r.a.createElement("div",{className:"Display-Checkout"},r.a.createElement("h1",null,"Checkout"),r.a.createElement("h3",null,"Time: ",e.time),r.a.createElement("h3",null,"Date: ",e.order.date),r.a.createElement("h3",null,"Restaurant name: ",e.order.name),r.a.createElement("h4",null,"Order list:"),e.order.menuItem.map((function(e){return r.a.createElement("li",null,e)})),r.a.createElement("h2",{className:"totalCheckout"},"Total: MYR",e.order.total))},S=N;function R(e){var t=e.split(":");return t[0]>=12?(12==t[0]?t[0]:t[0]-12)+":"+t[1]+"pm":("00"===t[0]?12:parseInt(t[0]))+":"+t[1]+"am"}function T(e){var t=new Date,a=t.getFullYear()+"-"+(t.getMonth()+1).toString().padStart(2,"0")+"-"+t.getDate().toString().padStart(2,"0"),n=t.getHours().toString().padStart(2,"0"),r=t.getMinutes().toString().padStart(2,"0");switch(e){case"hour":return n;case"min":return r;case"date":return a}}var A=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).dateCallback=function(e){n.setState({order:{time:n.state.order.time,date:e,name:n.state.order.name,menuItem:Object(s.a)(n.state.order.menuItem),total:n.state.order.total}})},n.timeCallback=function(e){n.setState({order:{time:e,date:n.state.order.date,name:n.state.order.name,menuItem:Object(s.a)(n.state.order.menuItem),total:n.state.order.total}})},n.handleSubmit=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("http://localhost:9000/post/orderhistory",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order:n.state.order})});case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.restaurantCallback=function(e){n.setState({order:{time:n.state.order.time,date:n.state.order.date,name:e,menuItem:Object(s.a)(n.state.order.menuItem),total:n.state.order.total}})},n.menuCallback=function(e){n.setState({order:{time:n.state.order.time,date:n.state.order.date,name:n.state.order.name,menuItem:Object(s.a)(e[0]),total:[e[1]]}})},n.state={apiResponse:[],viewId:1,order:{time:T("hour")+":"+T("min"),date:T("date"),name:null,menuItem:[],total:0}},n.removeElement=n.removeElement.bind(Object(b.a)(n)),n.NavButtonClick=n.NavButtonClick.bind(Object(b.a)(n)),n}return Object(o.a)(a,[{key:"callAPI",value:function(){var e=this;fetch("http://localhost:9000/restaurant").then((function(e){return e.json()})).then((function(t){return e.setState({apiResponse:t})}))}},{key:"componentWillMount",value:function(){this.callAPI()}},{key:"removeElement",value:function(e,t){var a=e.indexOf(t);a>-1&&e.splice(a,1)}},{key:"NavButtonClick",value:function(e){switch(e.target.id){case"nextButton":2==this.state.viewId&&null==this.state.order.name?alert("Please select a restaurant!"):this.setState({viewId:this.state.viewId+1});break;case"backButton":this.setState({viewId:this.state.viewId-1});break;case"checkoutButton":0==this.state.order.menuItem.length?alert("The cart is empty!"):this.setState({viewId:this.state.viewId+1})}}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"View-Window"},1===this.state.viewId?r.a.createElement(k,{dateCallback:this.dateCallback,minDate:T("date"),date:this.state.order.date,timeCallback:this.timeCallback,time:this.state.order.time}):null,2===this.state.viewId?r.a.createElement(j,{restCallback:this.restaurantCallback,date:this.state.order.date,time:this.state.order.time,restArr:this.state.apiResponse}):null,3===this.state.viewId?r.a.createElement(g,{menuCallback:this.menuCallback,totalCallback:this.totalCallback,restArr:this.state.apiResponse,name:this.state.order.name,date:this.state.order.date,time:this.state.order.time,menuItem:this.state.order.menuItem,total:this.state.order.total}):null,4===this.state.viewId?r.a.createElement(S,{order:this.state.order,time:R(this.state.order.time)}):null),r.a.createElement("div",{className:"Navigation-Bar"},this.state.viewId>=2&&4!=this.state.viewId?r.a.createElement("button",{className:"Nav-Button",id:"backButton",onClick:this.NavButtonClick},"Back"):null,this.state.viewId<3?r.a.createElement("button",{className:"Nav-Button",id:"nextButton",onClick:this.NavButtonClick},"Next"):null,3==this.state.viewId?r.a.createElement("button",{className:"Nav-Button",id:"checkoutButton",onClick:this.NavButtonClick},"Checkout"):null,4==this.state.viewId?r.a.createElement("div",null,r.a.createElement("button",{className:"Nav-Button",id:"confirmButton",onClick:this.handleSubmit},"Confirm"),r.a.createElement("button",{className:"cancelCheckoutBtn",id:"backButton",onClick:this.NavButtonClick},"Cancel")):null)),4==this.state.viewId?null:r.a.createElement("div",{className:"Order-Detail"},r.a.createElement("h3",null,"Order Detail"),r.a.createElement("div",null,r.a.createElement("h4",null,"Time: ",R(this.state.order.time)),r.a.createElement("h4",null,"Date: ",this.state.order.date),r.a.createElement("h4",null,"Restaurant: ",this.state.order.name)),r.a.createElement("div",null,this.state.order.menuItem.map((function(e){return r.a.createElement("li",null,e)}))),r.a.createElement("p",null,"Total: MYR ",this.state.order.total)))}}]),a}(n.Component),D=a(23),B=a(1),M=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={apiResponse:[]},n.callAPI=n.callAPI.bind(Object(b.a)(n)),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){console.log("Order History page mounted"),this.callAPI()}},{key:"callAPI",value:function(){var e=this;fetch("http://localhost:9000/get/orderhistory").then((function(e){return e.json()})).then((function(t){return e.setState({apiResponse:t})})),console.log("apiResponse: "+JSON.stringify(this.state.apiResponse))}},{key:"render",value:function(){return r.a.createElement("div",{className:"OrderHistory"},r.a.createElement("h1",null,"Order History"),r.a.createElement("div",{className:"orderHistoryDiv"},this.state.apiResponse.map((function(e){return r.a.createElement("table",{className:"orderHistoryTable"},r.a.createElement("tr",null,r.a.createElement("td",{className:"orderHistoryTableTop"},"Time"),r.a.createElement("td",null,e.time)),r.a.createElement("tr",null,r.a.createElement("td",{className:"orderHistoryTableTop"},"Date"),r.a.createElement("td",null,e.date)),r.a.createElement("tr",null,r.a.createElement("td",{className:"orderHistoryTableTop"}," Restaurant"),r.a.createElement("td",null,e.name)),r.a.createElement("th",null,"Order item"),r.a.createElement("th",null),e.menuItem.map((function(e){return r.a.createElement("tr",null,e)})),r.a.createElement("tr",null,r.a.createElement("td",{className:"orderHistoryTableTotal"},"Total"),r.a.createElement("td",{className:"orderHistoryTableTotal"},"MYR ",e.total)))}))))}}]),a}(n.Component),L=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).orderCallback=function(e){n.setState({orderList:[].concat(Object(s.a)(n.state.orderList),[e])})},n.state={orderList:[]},n}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("table",{className:"header-table"},r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("a",{href:"http://localhost:3000/home"},"Home")),r.a.createElement("td",null,r.a.createElement("a",{href:"http://localhost:3000/orderhistory"},"Order History")))),r.a.createElement("div",{className:"Header"},r.a.createElement("h1",null,"Movel AI Assignment")),r.a.createElement(D.a,null,r.a.createElement("div",null,r.a.createElement(B.d,null,r.a.createElement(B.b,{exact:!0,path:"/"},r.a.createElement(B.a,{to:"/home"})),r.a.createElement(B.b,{path:"/home",component:A}),r.a.createElement(B.b,{path:"/orderhistory",component:M})))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[25,1,2]]]);
//# sourceMappingURL=main.eb624da0.chunk.js.map